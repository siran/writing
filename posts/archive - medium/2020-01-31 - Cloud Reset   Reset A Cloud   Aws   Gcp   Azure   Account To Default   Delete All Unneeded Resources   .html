<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Cloud-Reset: Reset a Cloud (AWS, GCP, Azure) account to default (delete all unneeded resources!)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Cloud-Reset: Reset a Cloud (AWS, GCP, Azure) account to default (delete all unneeded resources!)</h1>
</header>
<section data-field="subtitle" class="p-summary">
Ever wanted to delete all the resources from an AWS/Cloud account? Now you can, and its really easy.
</section>
<section data-field="body" class="e-content">
<section name="9d30" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9682" id="9682" class="graf graf--h3 graf--leading graf--title">Cloud-Reset: Reset a Cloud (AWS, GCP, Azure) account to default (delete all unneeded resources!)</h3><p name="b979" id="b979" class="graf graf--p graf-after--h3">Ever wanted to reset (delete all the resources) from a cloud account (AWS/GCP/…)? Now you can, and its really easy.</p><figure name="f774" id="f774" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*kdHTfcAS7BMWWplNnMuI1w.png" data-width="665" data-height="600" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*kdHTfcAS7BMWWplNnMuI1w.png"><figcaption class="imageCaption">Easily throw away (DELETE) AWS unneeded resources.</figcaption></figure><h3 name="7e61" id="7e61" class="graf graf--h3 graf-after--figure">Freedom</h3><p name="5b02" id="5b02" class="graf graf--p graf-after--h3">We want to give everyone the freedom to explore all what AWS has to offer. So we decided to create a ‘sandbox’ account where everybody could create any resource they want.</p><h3 name="f7c8" id="f7c8" class="graf graf--h3 graf-after--p">Freedom has its cost</h3><p name="0b04" id="0b04" class="graf graf--p graf-after--h3">Of course, resources cost money. And as good as we are in giving everyone the freedom to explore, we didn’t want to spend more money than necessary by having lingering zombie resources that nobody knew even existed.</p><p name="5d06" id="5d06" class="graf graf--p graf-after--p">So, we also wanted to delete all resources periodically.</p><p name="0a05" id="0a05" class="graf graf--p graf-after--p">This was more easily said than done.</p><h3 name="1c35" id="1c35" class="graf graf--h3 graf-after--p">Solution</h3><p name="7ff9" id="7ff9" class="graf graf--p graf-after--h3">I tried finding some GitHub project that already did this, or at least that we could collaborate.</p><p name="50cd" id="50cd" class="graf graf--p graf-after--p">Although we found a couple (listed below in case you are interested), these we’re writting in Go and we’re too complicated to my test.</p><h3 name="3c23" id="3c23" class="graf graf--h3 graf-after--p">The project</h3><p name="0868" id="0868" class="graf graf--p graf-after--h3">So I literally this afternoon started a GitHub open-source project to achieve this.</p><p name="b3dc" id="b3dc" class="graf graf--p graf-after--p">All types of resources are handled by its own class, so its easy to extend.</p><p name="a31d" id="a31d" class="graf graf--p graf-after--p">The filename where the class is names after the <code class="markup--code markup--p-code">Boto3</code> resource name (ec2, ec2, ses, s3, etc…).</p><p name="15d8" id="15d8" class="graf graf--p graf-after--p">If you’re interested in this project, I’d love to see your collaborations. We can keep adding resources.</p><p name="c297" id="c297" class="graf graf--p graf-after--p">The first couple commits are a little messy, just because it’s the start of the project and it get hectic. But the idea is to keep it clean and tidy, tested and following best practices.</p><p name="80c5" id="80c5" class="graf graf--p graf-after--p">Here’s <a href="https://github.com/siran/cloud-reset" data-href="https://github.com/siran/cloud-reset" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">the repo</a>:</p><div name="f9d3" id="f9d3" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/siran/cloud-reset" data-href="https://github.com/siran/cloud-reset" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/siran/cloud-reset"><strong class="markup--strong markup--mixtapeEmbed-strong">siran/cloud-reset</strong><br><em class="markup--em markup--mixtapeEmbed-em">Deletes all resources from a AWS account. Resources to be deleted are specified in a YAML file, like - ec2: - s3…</em>github.com</a><a href="https://github.com/siran/cloud-reset" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="3649e6147809f71eb6c2a9f30ed1e646" data-thumbnail-img-id="0*qd3MbEaM_4rVuC21" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*qd3MbEaM_4rVuC21);"></a></div><h3 name="8035" id="8035" class="graf graf--h3 graf-after--mixtapeEmbed">Let’s disect a bit</h3><p name="c0c5" id="c0c5" class="graf graf--p graf-after--h3">There is a main script <code class="markup--code markup--p-code">delete_resoures.py</code> that instantiates class called <code class="markup--code markup--p-code">CloudReset.</code></p><p name="16ed" id="16ed" class="graf graf--p graf-after--p">When instantiating the class, you have to pass the name of a <code class="markup--code markup--p-code">YAML</code> configuration file. For example, a file named <code class="markup--code markup--p-code">resources_to_delete.yml</code> can have the following contents. This is valid <code class="markup--code markup--p-code">YAML</code> and its specified to delete resources of type <code class="markup--code markup--p-code">ec2</code> and <code class="markup--code markup--p-code">s3</code>:</p><pre name="70be" id="70be" class="graf graf--pre graf-after--p">- aws_ec2:<br>- aws_s3:<br>    exclude:<br>        - Name: /-terraform-/ # regular expression<br>        - Name: /-xxx-/<br>    options:<br>        force: true           # deletes bucket contents<br>- aws_kms:</pre><p name="87c4" id="87c4" class="graf graf--p graf-after--pre">Down the river, this instantiates the class in the file <code class="markup--code markup--p-code">lib/modules/ec2.py</code> which takes care of finding the ids of all the ec2s and deleting them.</p><p name="c37a" id="c37a" class="graf graf--p graf-after--p">Notice that for resource <code class="markup--code markup--p-code">s3</code> it’s possible to filter the resources to be deleted. We can <code class="markup--code markup--p-code">exclude</code> resources with <code class="markup--code markup--p-code">Name</code> matching a regular expression.</p><p name="e270" id="e270" class="graf graf--p graf-after--p">The <code class="markup--code markup--p-code">ec2.py</code> file (or any other resource file) is quite simple. It inherits from the <code class="markup--code markup--p-code">BaseResource</code> class, which enforces to have at least 3 methods:</p><ul class="postList"><li name="bb14" id="bb14" class="graf graf--li graf-after--p">get_resources()</li><li name="539f" id="539f" class="graf graf--li graf-after--li">list_resources()</li><li name="e3e1" id="e3e1" class="graf graf--li graf-after--li">delete_resources()</li></ul><p name="8325" id="8325" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">How to run</strong></p><p name="73a6" id="73a6" class="graf graf--p graf-after--p">Before calling the script, be sure to install the requirements:</p><pre name="e14e" id="e14e" class="graf graf--pre graf-after--p">pip3 install -r requirements.txt</pre><p name="22f9" id="22f9" class="graf graf--p graf-after--pre">The script can be called as:</p><pre name="87d3" id="87d3" class="graf graf--pre graf-after--p">python delete_resources.py -f resources_to_delete.yml</pre><p name="b5ad" id="b5ad" class="graf graf--p graf-after--pre">The script is configured with a <code class="markup--code markup--p-code">dry_run</code> flag set initially to <code class="markup--code markup--p-code">True</code>, so it should not delete anything by default. But be careful anyways.</p><h3 name="a7d8" id="a7d8" class="graf graf--h3 graf-after--p">Future plans</h3><p name="e176" id="e176" class="graf graf--p graf-after--h3 graf--trailing">In the future, we’re planning to specify in the <code class="markup--code markup--p-code">YAML</code> configuration file options to filter by tags, creation date and more. Also we’d like to add other cloud providers as <code class="markup--code markup--p-code">GCP</code> or <code class="markup--code markup--p-code">Azure</code> .</p></div></div></section><section name="fc4a" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="1688" id="1688" class="graf graf--p graf--leading">If you like the idea, clone the repo and show what you’ve got. There are many things we can do.</p><p name="eded" id="eded" class="graf graf--p graf-after--p graf--trailing">That’s it for now, but I hope to know more about you!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@anrodz" class="p-author h-card">An Rodriguez</a> on <a href="https://medium.com/p/889c0a0680f6"><time class="dt-published" datetime="2020-01-31T02:56:29.242Z">January 31, 2020</time></a>.</p><p><a href="https://medium.com/@anrodz/reset-an-aws-account-to-default-889c0a0680f6" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 21, 2025.</p></footer></article></body></html>